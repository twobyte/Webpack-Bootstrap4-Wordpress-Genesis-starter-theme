window.genesis={settingsChanged:!1,onboardingTasks:['dependencies','content'],categoryChecklistToggleInit:function(){'use strict';jQuery('<p><span id="genesis-category-checklist-toggle" class="button">'+genesisL10n.categoryChecklistToggle+'</span></p>').insertBefore('ul.categorychecklist');jQuery(document).on('click.genesis.genesis_category_checklist_toggle','#genesis-category-checklist-toggle',genesis.categoryChecklistToggle)},categoryChecklistToggle:function(event){'use strict';var $this=jQuery(event.target),checkboxes=$this.parent().next().find(':checkbox');if($this.data('clicked')){checkboxes.removeAttr('checked');$this.data('clicked',!1)}else{checkboxes.attr('checked','checked');$this.data('clicked',!0)}},toggleSettingsInit:function(){'use strict';jQuery.each(genesis_toggles,function(k,v){var data={selector:v[0],showSelector:v[1],checkValue:v[2]};jQuery('div.genesis-metaboxes').on('change.genesis.genesis_toggle',v[0],data,genesis.toggleSettings);jQuery(v[0]).trigger('change.genesis_toggle',data)})},toggleSettings:function(event){'use strict';var $selector=jQuery(event.data.selector),$showSelector=jQuery(event.data.showSelector),checkValue=event.data.checkValue;if((jQuery.isArray(checkValue)&&jQuery.inArray($selector.val(),checkValue)>-1)||('_unchecked'===checkValue&&$selector.is(':not(:checked)'))||('_checked'===checkValue&&$selector.is(':checked'))||('_unchecked'!==checkValue&&'_checked'!==checkValue&&$selector.val()===checkValue)){jQuery($showSelector).slideDown('fast')}else{jQuery($showSelector).slideUp('fast')}},updateCharacterCount:function(event){'use strict';jQuery('#'+event.target.id+'_chars').html(jQuery(event.target).val().length.toString())},layoutHighlighter:function(event){'use strict';var selectedClass='selected';jQuery('input[name="'+jQuery(event.target).attr('name')+'"]').parent('label').removeClass(selectedClass);jQuery(event.currentTarget).addClass(selectedClass)},confirm:function(text){'use strict';return confirm(text)},attachUnsavedChangesListener:function(){'use strict';jQuery('div.genesis-metaboxes :input').change(function(){genesis.registerChange()});window.onbeforeunload=function(){if(genesis.settingsChanged){return genesisL10n.saveAlert}};jQuery('div.genesis-metaboxes input[type="submit"]').click(function(){window.onbeforeunload=null})},registerChange:function(){'use strict';genesis.settingsChanged=!0},confirmUpgrade:function(){'use strict';return confirm(genesisL10n.confirmUpgrade)},confirmReset:function(){'use strict';return confirm(genesisL10n.confirmReset)},doOnboardingTask:function(task,step){task=task||'dependencies';step=step||0;if(-1===jQuery.inArray(task,genesis.onboardingTasks)){genesis.completeOnboarding();return}
genesis.toggleOnboardingTaskStatus(task,'processing');jQuery.ajax({data:{action:'genesis_do_onboarding_process',task:task,step:step,nonce:genesis_onboarding.nonce,},type:'post',dataType:'json',url:ajaxurl,success:function(response){if(response.data.homepage_edit_link){jQuery('#genesis-onboarding-edit-homepage').attr('href',response.data.homepage_edit_link)}
if(!0===response.data.complete){genesis.toggleOnboardingTaskStatus(task,'done');genesis.onboardingTasks.shift();if(!genesis.onboardingTasks.length){genesis.completeOnboarding();return}
genesis.toggleOnboardingTaskStatus(genesis.onboardingTasks[0],'processing');window.setTimeout(function(){genesis.doOnboardingTask(genesis.onboardingTasks[0],0)},2000)}
genesis.toggleOnboardingTaskStatus(genesis.onboardingTasks[0],'processing');window.setTimeout(function(){genesis.doOnboardingTask(response.data.task,response.data.next_step)},2000)}})},toggleOnboardingTaskStatus:function(task,status){if(-1===jQuery.inArray(task,genesis.onboardingTasks)){return}
var current_task=jQuery('.genesis-onboarding-task-'+task);switch(status){case 'processing':current_task.addClass('genesis-onboarding-list-processing');break;case 'done':current_task.addClass('genesis-onboarding-list-done').removeClass('genesis-onboarding-list-processing');break}},completeOnboarding:function(){window.setTimeout(function(){jQuery('.genesis-onboarding-task-final').addClass('genesis-onboarding-list-done')},300)},ready:function(){'use strict';genesis.categoryChecklistToggleInit();genesis.toggleSettingsInit();genesis.attachUnsavedChangesListener();jQuery('#genesis_title, #genesis_description').on('keyup.genesis.genesis_character_count',genesis.updateCharacterCount);jQuery('.genesis-layout-selector').on('change.genesis.genesis_layout_selector','label',genesis.layoutHighlighter);jQuery('.genesis-js-confirm-upgrade').on('click.genesis.genesis_confirm_upgrade',genesis.confirmUpgrade);jQuery('.genesis-js-confirm-reset').on('click.genesis.genesis_confirm_reset',genesis.confirmReset);jQuery('#genesis-onboarding-start').on('click',function(event){jQuery(this).prop('disabled',!0).addClass('genesis-onboarding-button-disabled');genesis.doOnboardingTask(event.target.dataset.task,event.target.dataset.step)})}};jQuery(genesis.ready);function genesis_confirm(text){'use strict';return genesis.confirm(text)}
